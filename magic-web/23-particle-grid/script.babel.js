function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var cvs=document.querySelector("#cvs");var Particle=function(){function Particle(_ref){var _ref$isMouse=_ref.isMouse,isMouse=_ref$isMouse===void 0?false:_ref$isMouse,cvsCtx=_ref.cvsCtx,x=_ref.x,y=_ref.y,vx=_ref.vx,vy=_ref.vy;_classCallCheck(this,Particle);_defineProperty(this,"cvsCtx",null);_defineProperty(this,"r",1);_defineProperty(this,"x",0);_defineProperty(this,"y",0);_defineProperty(this,"vx",0);_defineProperty(this,"vy",0);_defineProperty(this,"ax",0);_defineProperty(this,"ay",0);_defineProperty(this,"lastTime",0);_defineProperty(this,"isMouse",false);this.isMouse=isMouse;this.cvsCtx=cvsCtx;this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.lastTime=Date.now()}_createClass(Particle,[{key:"render",value:function render(){if(!this.isMouse){var cvsCtx=this.cvsCtx,r=this.r,vx=this.vx,vy=this.vy,ax=this.ax,ay=this.ay,lastTime=this.lastTime;var t=(Date.now()-lastTime)/1000;this.x+=vx*t+ax*Math.pow(t,2)*0.5;this.y+=vy*t+ay*Math.pow(t,2)*0.5;cvsCtx.beginPath();cvsCtx.fillStyle="rgba(255,255,255,1)";cvsCtx.arc(this.x,this.y,r,0,Math.PI*2,false);cvsCtx.fill();cvsCtx.closePath()}this.lastTime=Date.now()}}]);return Particle}();var ParticleGrid=function(){function ParticleGrid(cvs){var _this=this;_classCallCheck(this,ParticleGrid);_defineProperty(this,"cvs",null);_defineProperty(this,"cvsCtx",null);_defineProperty(this,"width",0);_defineProperty(this,"height",0);_defineProperty(this,"speed",100);_defineProperty(this,"connectDistance",200);_defineProperty(this,"particles",[]);_defineProperty(this,"flag",false);_defineProperty(this,"_onEnterFrame",function(){var cvsCtx=_this.cvsCtx,width=_this.width,height=_this.height,connectDistance=_this.connectDistance;cvsCtx.clearRect(0,0,width,height);cvsCtx.fillStyle="#000000";cvsCtx.fillRect(0,0,width,height);_this.particles=_this.particles.filter(function(item){var x=item.x,y=item.y;var alive=x>=-connectDistance&&y>=-connectDistance&&x<=width+connectDistance&&y<=height+connectDistance;return alive&&item.render(),alive});for(var i=0;i<_this.total-_this.particles.length;i++){_this.particles.push(_this.randomParticle)}_this._interact();requestAnimationFrame(_this._onEnterFrame)});_defineProperty(this,"_onMouseMove",function(e){var x=e.offsetX,y=e.offsetY;var width=_this.width,height=_this.height,_this$cvs=_this.cvs,w=_this$cvs.offsetWidth,h=_this$cvs.offsetHeight;var mouse=_this.particles[0];mouse.isMouse=true;mouse.x=x*(width/w);mouse.y=y*(height/h)});_defineProperty(this,"_onClick",function(e){_this.flag=!_this.flag});this.cvs=cvs;this.cvsCtx=cvs.getContext("2d");this.width=this.cvs.width=2560;this.height=this.cvs.height=1440;this.width=this.cvs.width=cvs.offsetWidth*window.devicePixelRatio;this.height=this.cvs.height=cvs.offsetHeight*window.devicePixelRatio;window.addEventListener("resize",function(){_this.width=_this.cvs.width=cvs.offsetWidth*window.devicePixelRatio;_this.height=_this.cvs.height=cvs.offsetHeight*window.devicePixelRatio});this._init();this._onEnterFrame()}_createClass(ParticleGrid,[{key:"total",get:function get(){return Math.pow(this.width*this.height,0.5)*0.24}},{key:"randomParticle",get:function get(){var cvsCtx=this.cvsCtx,width=this.width,height=this.height,speed=this.speed,connectDistance=this.connectDistance;var x,y,rad;var i=Math.floor(Math.random()*4);switch(i){case 0:rad=Math.random()*Math.PI;x=Math.random()*(width+2*connectDistance)-connectDistance;y=-connectDistance;break;case 1:rad=(Math.random()+0.5)*Math.PI;x=width+connectDistance;y=Math.random()*(height+2*connectDistance)-connectDistance;break;case 2:rad=(Math.random()-1)*Math.PI;x=Math.random()*(width+2*connectDistance)-connectDistance;y=height+connectDistance;break;case 3:rad=(Math.random()-0.5)*Math.PI;x=-connectDistance;y=Math.random()*(height+2*connectDistance)-connectDistance;break;}return new Particle({cvsCtx:cvsCtx,x:x,y:y,vx:Math.cos(rad)*speed,vy:Math.sin(rad)*speed})}},{key:"_init",value:function _init(){var cvs=this.cvs,cvsCtx=this.cvsCtx,width=this.width,height=this.height,speed=this.speed,connectDistance=this.connectDistance;this.particles[0]=new Particle({cvsCtx:cvsCtx,x:0,y:0,vx:0,vy:0});for(var i=1;i<this.total;i++){var rad=(Math.random()*2-1)*Math.PI;this.particles[i]=new Particle({cvsCtx:cvsCtx,x:Math.random()*(width+2*connectDistance)-connectDistance,y:Math.random()*(height+2*connectDistance)-connectDistance,vx:Math.cos(rad)*speed,vy:Math.sin(rad)*speed})}cvs.addEventListener("mousemove",this._onMouseMove);cvs.addEventListener("click",this._onClick)}},{key:"_interact",value:function _interact(){var cvsCtx=this.cvsCtx,particles=this.particles,connectDistance=this.connectDistance,flag=this.flag;var l=particles.length;for(var i=0;i<l-1;i++){var a=particles[i];for(var j=i+1;j<l;j++){var b=particles[j];var d=Math.pow(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2),0.5);if(a.isMouse){var r=flag?connectDistance:connectDistance*0.6;if(d<=r*(flag?1:2)){var c=flag?40000:20000;var rad=Math.atan2(a.y-b.y,a.x-b.x);b.ax=Math.cos(rad)*c*((d-r)/r);b.ay=Math.sin(rad)*c*((d-r)/r)}else{b.ax=0;b.ay=0}}if(d<=connectDistance){cvsCtx.beginPath();cvsCtx.lineWidth=1;cvsCtx.lineCap="round";cvsCtx.strokeStyle="rgba(255,255,255,".concat(1-d/connectDistance,")");cvsCtx.moveTo(a.x,a.y);cvsCtx.lineTo(b.x,b.y);cvsCtx.stroke();cvsCtx.closePath()}}}}}]);return ParticleGrid}();new ParticleGrid(cvs);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjdnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJQYXJ0aWNsZSIsImlzTW91c2UiLCJjdnNDdHgiLCJ4IiwieSIsInZ4IiwidnkiLCJsYXN0VGltZSIsIkRhdGUiLCJub3ciLCJyIiwiYXgiLCJheSIsInQiLCJiZWdpblBhdGgiLCJmaWxsU3R5bGUiLCJhcmMiLCJNYXRoIiwiUEkiLCJmaWxsIiwiY2xvc2VQYXRoIiwiUGFydGljbGVHcmlkIiwid2lkdGgiLCJoZWlnaHQiLCJjb25uZWN0RGlzdGFuY2UiLCJjbGVhclJlY3QiLCJmaWxsUmVjdCIsInBhcnRpY2xlcyIsImZpbHRlciIsIml0ZW0iLCJhbGl2ZSIsInJlbmRlciIsImkiLCJ0b3RhbCIsImxlbmd0aCIsInB1c2giLCJyYW5kb21QYXJ0aWNsZSIsIl9pbnRlcmFjdCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9vbkVudGVyRnJhbWUiLCJlIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJ3Iiwib2Zmc2V0V2lkdGgiLCJoIiwib2Zmc2V0SGVpZ2h0IiwibW91c2UiLCJmbGFnIiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImRldmljZVBpeGVsUmF0aW8iLCJhZGRFdmVudExpc3RlbmVyIiwiX2luaXQiLCJzcGVlZCIsInJhZCIsImZsb29yIiwicmFuZG9tIiwiY29zIiwic2luIiwiX29uTW91c2VNb3ZlIiwiX29uQ2xpY2siLCJsIiwiYSIsImoiLCJiIiwiZCIsImMiLCJhdGFuMiIsImxpbmVXaWR0aCIsImxpbmVDYXAiLCJzdHJva2VTdHlsZSIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSJdLCJtYXBwaW5ncyI6InV5QkFBQSxHQUFNQSxDQUFBQSxHQUFHLENBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixNQUF2QixDQUFaLEMsR0FHTUMsQ0FBQUEsUSxZQVlGLHVCQUF1RCx1QkFBekNDLE9BQXlDLENBQXpDQSxPQUF5Qyx1QkFBL0IsS0FBK0IsY0FB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U2VsZWN0b3IoJyNjdnMnKTtcclxuXHJcbi8qIOeykuWtkCAqL1xyXG5jbGFzcyBQYXJ0aWNsZSB7XHJcbiAgICBjdnNDdHggPSBudWxsO1xyXG4gICAgciA9IDE7IC8vIOWNiuW+hFxyXG4gICAgeCA9IDA7IC8vIOaoquWdkOagh1xyXG4gICAgeSA9IDA7IC8vIOe6teWdkOagh1xyXG4gICAgdnggPSAwOyAvLyDmsLTlubPpgJ/luqZcclxuICAgIHZ5ID0gMDsgLy8g5Z6C55u06YCf5bqmXHJcbiAgICBheCA9IDA7IC8vIOawtOW5s+WKoOmAn+W6plxyXG4gICAgYXkgPSAwOyAvLyDlnoLnm7TliqDpgJ/luqZcclxuICAgIGxhc3RUaW1lID0gMDtcclxuICAgIGlzTW91c2UgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7IGlzTW91c2UgPSBmYWxzZSwgY3ZzQ3R4LCB4LCB5LCB2eCwgdnkgfSkge1xyXG4gICAgICAgIHRoaXMuaXNNb3VzZSA9IGlzTW91c2U7XHJcbiAgICAgICAgdGhpcy5jdnNDdHggPSBjdnNDdHg7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMudnggPSB2eDtcclxuICAgICAgICB0aGlzLnZ5ID0gdnk7XHJcbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc01vdXNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY3ZzQ3R4LCByLCB2eCwgdnksIGF4LCBheSwgbGFzdFRpbWUgfSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoRGF0ZS5ub3coKSAtIGxhc3RUaW1lKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIHRoaXMueCArPSB2eCAqIHQgKyBheCAqIHQgKiogMiAqIDAuNTtcclxuICAgICAgICAgICAgdGhpcy55ICs9IHZ5ICogdCArIGF5ICogdCAqKiAyICogMC41O1xyXG4gICAgICAgICAgICAvLyB0aGlzLnZ4ICs9IGF4ICogdDtcclxuICAgICAgICAgICAgLy8gdGhpcy52eSArPSBheSAqIHQ7XHJcbiAgICAgICAgICAgIGN2c0N0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3ZzQ3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDEpJztcclxuICAgICAgICAgICAgY3ZzQ3R4LmFyYyh0aGlzLngsIHRoaXMueSwgciwgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcclxuICAgICAgICAgICAgY3ZzQ3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgY3ZzQ3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxufVxyXG5cclxuLyog57KS5a2Q572R5qC8ICovXHJcbmNsYXNzIFBhcnRpY2xlR3JpZCB7XHJcbiAgICBjdnMgPSBudWxsO1xyXG4gICAgY3ZzQ3R4ID0gbnVsbDtcclxuICAgIHdpZHRoID0gMDtcclxuICAgIGhlaWdodCA9IDA7XHJcbiAgICBzcGVlZCA9IDEwMDtcclxuICAgIGNvbm5lY3REaXN0YW5jZSA9IDIwMDtcclxuICAgIHBhcnRpY2xlcyA9IFtdO1xyXG4gICAgZmxhZyA9IGZhbHNlO1xyXG5cclxuICAgIGdldCB0b3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCkgKiogMC41ICogMC4yNDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmFuZG9tUGFydGljbGUoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjdnNDdHgsIHdpZHRoLCBoZWlnaHQsIHNwZWVkLCBjb25uZWN0RGlzdGFuY2UgfSA9IHRoaXM7XHJcbiAgICAgICAgbGV0IHgsIHksIHJhZDtcclxuICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCk7XHJcbiAgICAgICAgc3dpdGNoIChpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIHJhZCA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJO1xyXG4gICAgICAgICAgICAgICAgeCA9IE1hdGgucmFuZG9tKCkgKiAod2lkdGggKyAyICogY29ubmVjdERpc3RhbmNlKSAtIGNvbm5lY3REaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHkgPSAtY29ubmVjdERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHJhZCA9IChNYXRoLnJhbmRvbSgpICsgMC41KSAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICB4ID0gd2lkdGggKyBjb25uZWN0RGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5yYW5kb20oKSAqIChoZWlnaHQgKyAyICogY29ubmVjdERpc3RhbmNlKSAtIGNvbm5lY3REaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICByYWQgPSAoTWF0aC5yYW5kb20oKSAtIDEpICogTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgIHggPSBNYXRoLnJhbmRvbSgpICogKHdpZHRoICsgMiAqIGNvbm5lY3REaXN0YW5jZSkgLSBjb25uZWN0RGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICB5ID0gaGVpZ2h0ICsgY29ubmVjdERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHJhZCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICB4ID0gLWNvbm5lY3REaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHkgPSBNYXRoLnJhbmRvbSgpICogKGhlaWdodCArIDIgKiBjb25uZWN0RGlzdGFuY2UpIC0gY29ubmVjdERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoe1xyXG4gICAgICAgICAgICBjdnNDdHgsXHJcbiAgICAgICAgICAgIHgsXHJcbiAgICAgICAgICAgIHksXHJcbiAgICAgICAgICAgIHZ4OiBNYXRoLmNvcyhyYWQpICogc3BlZWQsXHJcbiAgICAgICAgICAgIHZ5OiBNYXRoLnNpbihyYWQpICogc3BlZWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoY3ZzKSB7XHJcbiAgICAgICAgdGhpcy5jdnMgPSBjdnM7XHJcbiAgICAgICAgdGhpcy5jdnNDdHggPSBjdnMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5jdnMud2lkdGggPSAyNTYwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jdnMuaGVpZ2h0ID0gMTQ0MDtcclxuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5jdnMud2lkdGggPSBjdnMub2Zmc2V0V2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuY3ZzLmhlaWdodCA9IGN2cy5vZmZzZXRIZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5jdnMud2lkdGggPSBjdnMub2Zmc2V0V2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmN2cy5oZWlnaHQgPSBjdnMub2Zmc2V0SGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgICAgIHRoaXMuX29uRW50ZXJGcmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9pbml0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3ZzLCBjdnNDdHgsIHdpZHRoLCBoZWlnaHQsIHNwZWVkLCBjb25uZWN0RGlzdGFuY2UgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZXNbMF0gPSBuZXcgUGFydGljbGUoe1xyXG4gICAgICAgICAgICBjdnNDdHgsXHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHZ4OiAwLFxyXG4gICAgICAgICAgICB2eTogMCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMudG90YWw7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCByYWQgPSAoTWF0aC5yYW5kb20oKSAqIDIgLSAxKSAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgIHRoaXMucGFydGljbGVzW2ldID0gbmV3IFBhcnRpY2xlKHtcclxuICAgICAgICAgICAgICAgIGN2c0N0eCxcclxuICAgICAgICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiAod2lkdGggKyAyICogY29ubmVjdERpc3RhbmNlKSAtIGNvbm5lY3REaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIHk6IE1hdGgucmFuZG9tKCkgKiAoaGVpZ2h0ICsgMiAqIGNvbm5lY3REaXN0YW5jZSkgLSBjb25uZWN0RGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICB2eDogTWF0aC5jb3MocmFkKSAqIHNwZWVkLFxyXG4gICAgICAgICAgICAgICAgdnk6IE1hdGguc2luKHJhZCkgKiBzcGVlZCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN2cy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XHJcbiAgICAgICAgY3ZzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRW50ZXJGcmFtZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB7IGN2c0N0eCwgd2lkdGgsIGhlaWdodCwgY29ubmVjdERpc3RhbmNlIH0gPSB0aGlzO1xyXG4gICAgICAgIGN2c0N0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgY3ZzQ3R4LmZpbGxTdHlsZSA9ICcjMDAwMDAwJztcclxuICAgICAgICBjdnNDdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZXMgPSB0aGlzLnBhcnRpY2xlcy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gaXRlbTtcclxuICAgICAgICAgICAgY29uc3QgYWxpdmUgPVxyXG4gICAgICAgICAgICAgICAgeCA+PSAtY29ubmVjdERpc3RhbmNlICYmXHJcbiAgICAgICAgICAgICAgICB5ID49IC1jb25uZWN0RGlzdGFuY2UgJiZcclxuICAgICAgICAgICAgICAgIHggPD0gd2lkdGggKyBjb25uZWN0RGlzdGFuY2UgJiZcclxuICAgICAgICAgICAgICAgIHkgPD0gaGVpZ2h0ICsgY29ubmVjdERpc3RhbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gYWxpdmUgJiYgaXRlbS5yZW5kZXIoKSwgYWxpdmU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvdGFsIC0gdGhpcy5wYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXMucHVzaCh0aGlzLnJhbmRvbVBhcnRpY2xlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW50ZXJhY3QoKTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fb25FbnRlckZyYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgX2ludGVyYWN0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgY3ZzQ3R4LCBwYXJ0aWNsZXMsIGNvbm5lY3REaXN0YW5jZSwgZmxhZyB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBsID0gcGFydGljbGVzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwgLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgYSA9IHBhcnRpY2xlc1tpXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiID0gcGFydGljbGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9ICgoYS54IC0gYi54KSAqKiAyICsgKGEueSAtIGIueSkgKiogMikgKiogMC41O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhLmlzTW91c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gZmxhZyA/IGNvbm5lY3REaXN0YW5jZSA6IGNvbm5lY3REaXN0YW5jZSAqIDAuNjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZCA8PSByICogKGZsYWcgPyAxIDogMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGZsYWcgPyA0MDAwMCA6IDIwMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYWQgPSBNYXRoLmF0YW4yKGEueSAtIGIueSwgYS54IC0gYi54KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5heCA9IE1hdGguY29zKHJhZCkgKiBjICogKChkIC0gcikgLyByKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5heSA9IE1hdGguc2luKHJhZCkgKiBjICogKChkIC0gcikgLyByKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLmF4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYi5heSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIOi/nue6vyAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGQgPD0gY29ubmVjdERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3ZzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN2c0N0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGN2c0N0eC5saW5lQ2FwID0gJ3JvdW5kJztcclxuICAgICAgICAgICAgICAgICAgICBjdnNDdHguc3Ryb2tlU3R5bGUgPSBgcmdiYSgyNTUsMjU1LDI1NSwkezEgLSBkIC8gY29ubmVjdERpc3RhbmNlfSlgO1xyXG4gICAgICAgICAgICAgICAgICAgIGN2c0N0eC5tb3ZlVG8oYS54LCBhLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN2c0N0eC5saW5lVG8oYi54LCBiLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN2c0N0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdnNDdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uTW91c2VNb3ZlID0gZSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBvZmZzZXRYOiB4LCBvZmZzZXRZOiB5IH0gPSBlO1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgY3ZzOiB7IG9mZnNldFdpZHRoOiB3LCBvZmZzZXRIZWlnaHQ6IGggfSxcclxuICAgICAgICB9ID0gdGhpcztcclxuICAgICAgICBjb25zdCBtb3VzZSA9IHRoaXMucGFydGljbGVzWzBdO1xyXG4gICAgICAgIG1vdXNlLmlzTW91c2UgPSB0cnVlO1xyXG4gICAgICAgIG1vdXNlLnggPSB4ICogKHdpZHRoIC8gdyk7XHJcbiAgICAgICAgbW91c2UueSA9IHkgKiAoaGVpZ2h0IC8gaCk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9vbkNsaWNrID0gZSA9PiB7XHJcbiAgICAgICAgdGhpcy5mbGFnID0gIXRoaXMuZmxhZztcclxuICAgIH07XHJcbn1cclxuXHJcbm5ldyBQYXJ0aWNsZUdyaWQoY3ZzKTtcclxuIl19